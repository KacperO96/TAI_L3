<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <ul class="nav navbar-nav">
        <h1><a class="navbar-brand" href="index.html"><img
                src="https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg" width="30" height="30" alt=""></a>
        </h1>
        <li><a href="#">Blog</a></li>
        <li><a class="nav-item" href="quiz.html">Quiz</a></li>
        <li class="nav-item">
            <a class="nav-link" href="kontakt.html">Kontakt</a></li>
    </ul>
</nav>

<div class="quiz-content">
    <div class="progress">
        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuemin="0" aria-valuemax="100"
             style="width:10%">
        </div>
    </div>

    <div>
        <p id="question" align="center">pytanie</p>
    </div>

    <div>
        <div class="col-sm-3">
            <button id="answerA" align="center" onclick="chooseAnswer(id)" type="button" class="btn btn-default">
                Odpowiedź
                pierwsza
            </button>
        </div>
        <div class="col-sm-3">
            <button id="answerB" align="center" onclick="chooseAnswer(id)" type="button" class="btn btn-default">
                Odpowiedź
                druga
            </button>
        </div>
        <div class="col-sm-3 ">
            <button id="answerC" align="center" onclick="chooseAnswer(id)" type="button" class="btn btn-default">
                Odpowiedź
                trzecia
            </button>
        </div>
        <div class="col-sm-3 ">
            <button id="answerD" align="center" onclick="chooseAnswer(id)" type="button" class="btn btn-default">
                Odpowiedź
                trzecia
            </button>
        </div>
    </div>
</div>

<div class="result-content" style="display:none">
    <button id="resetbtn" align="center" onclick="resetQuiz()" type="button" class="btn btn-default">Reset</button>
    <div style="display: inline-block">
        <p>Twój wynik: </p>
        <p>Średni wynik: </p>
    </div>

    <div style="display: inline-block">
        <p id="result-p">asd</p>
        <p id="avereageresult-p">asd2</p>
    </div>

</div>

<script>
    var list = [];
    var points = 0;
    var count = 0;
    var question = ["P1", "P2", "P3", "P4", "P5", "P6", "P7", "P8", "P9", "P10"];
    var answersA = ["A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10"];
    var answersB = ["B1", "B2", "B3", "B4", "B5", "B6", "B7", "B8", "B9", "B10"];
    var answersC = ["C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10"];
    var answersD = ["D1", "D2", "D3", "D4", "D5", "D6", "D7", "D8", "D9", "D10"];
    var correctAnswers = ["A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10"];
    var answerAHandler = document.getElementById("answerA");
    var answerBHandler = document.getElementById("answerB");
    var answerCHandler = document.getElementById("answerC");
    var answerDHandler = document.getElementById("answerD");
    var questionHandler = document.getElementById("question");
    var progressBar = document.querySelector(".progress-bar");
    var quizContent = document.querySelector(".quiz-content");
    var resultContent = document.querySelector(".result-content");
    var result = document.getElementById("result-p");
    var averageResult = document.getElementById("avereageresult-p");

    console.log(localStorage);
    if (localStorage.length !== 0) {
        JSON.parse(localStorage.getItem('results')).forEach(item => {
            list.push(item);
        });
    }

    answerAHandler.textContent = answersA[count];
    answerBHandler.textContent = answersB[count];
    answerCHandler.textContent = answersC[count];
    answerDHandler.textContent = answersD[count];
    questionHandler.textContent = question[count];

    function chooseAnswer(id) {
        if (document.getElementById(id).textContent === correctAnswers[count]) {
            points++;
        }
        if (count === 9) {
            list.push(points);
            localStorage.setItem("results", JSON.stringify(list));
            result.textContent = this.points;
            let resultValue = 0;
            let resultList = JSON.parse(localStorage.getItem('results'));
            resultList.forEach(item => {
                resultValue += item;
            })
            console.log(resultList);
            averageResult.textContent = resultValue / resultList.length;
            quizContent.style.display = "none";
            resultContent.style.display = "block"
        }
        count++;
        progressBar.style.width = (count + 1) * 10 + "%";
        answerAHandler.textContent = answersA[count];
        answerBHandler.textContent = answersB[count];
        answerCHandler.textContent = answersC[count];
        answerDHandler.textContent = answersD[count];
        questionHandler.textContent = question[count];
    }

    function resetQuiz() {
        quizContent.style.display = "block";
        resultContent.style.display = "none";
        count = 0;
        points = 0;
        progressBar.style.width = (count + 1) * 10 + "%";
        answerAHandler.textContent = answersA[count];
        answerBHandler.textContent = answersB[count];
        answerCHandler.textContent = answersC[count];
        answerDHandler.textContent = answersD[count];
        questionHandler.textContent = question[count];
    }

</script>
</body>
</html>